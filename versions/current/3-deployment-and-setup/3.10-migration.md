# 3.10. Migration

Although we try our best to automatically migrate your server when upgrading versions, there are times when this is simply not possible. In this section we will attempt to cover some of the most common migrations you might encounter when running our software yourself via a Docker container.

{% hint style="warning" %} Do not attempt to upgrade beyond more than two major GeoPrism Registry versions at a time. {% endhint %}

The general steps for performing any sort of migration can be broken down as follows:
1. Create a clone environment of your production server where we will test these steps
2. Perform all required migrations as indicated by the steps below on the cloned environment, keeping track of the exact commands relevant for your environment and making note of any issues or cavaets.
3. Allocate a "downtime window" for your server so as to disturb users as little as possible
4. Perform a snapshot / backup of your production server
5. Stop the webserver with `docker stop geoprism`
6. Perform the steps exactly as they were performed on the test environment, except this time on the live production environment
7. Set your docker-compose.yml file to the new GeoPrism Registry / Postgres / OrientDB versions and do a `docker-compose pull`. Then do a `docker-compose up`. When the GeoPrism Registry boots, it will automatically run any additional patches or migration scripts as necessary. Be patient as this step can take time.

## Orient DB Migration

If a newer version of the GeoPrism Registry requires a major upgrade of your Orient DB software, a manual data migration must be performed.

The official OrientDB migration documentation can be found here:

http://www.orientdb.com/docs/last/release/Upgrade.html

Since the official OrientDB migration documentation can be either confusing, lacking in detail, or simply not targeted towards the way we use their software, we will walk you through the detailed steps here.



## PostgreSQL Migration

Upgrading PostgreSQL is fairly straightforward and reliable.

The official PostgreSQL migration documenation can be found here:

https://www.postgresql.org/docs/current/upgrading.html#UPGRADING-VIA-PGDUMPALL

The basic steps for performing an upgrade on our default docker-compose environment is as follows:
